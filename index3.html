<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ultra-Basic Search Test</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .search-form {
      background: #f0f0f0;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    input[type="text"] {
      width: 70%;
      padding: 10px;
      font-size: 16px;
    }
    
    button {
      padding: 10px 15px;
      background: #ff3333;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }
    
    .item {
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }
    
    .highlighted {
      background: #ffff99;
    }
    
    .debug-panel {
      background: #eee;
      padding: 10px;
      margin-top: 20px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>Ultra-Basic Search Test</h1>
  
  <!-- Status display -->
  <div id="status" style="padding:10px; background:#ccffcc; margin-bottom:20px; display:none;"></div>
  
  <!-- Super simple search form - intentionally uses a GET method -->
  <div class="search-form">
    <form action="" method="get">
      <input type="text" name="q" id="searchInput" placeholder="Type search term" value="">
      <button type="submit">Search</button>
    </form>
  </div>
  
  <!-- Search results -->
  <div id="results">
    <div class="item" data-title="Alabanza y adoración">Alabanza y adoración</div>
    <div class="item" data-title="Al Rey de reyes">Al Rey de reyes</div>
    <div class="item" data-title="Aleluya Cristo vive">Aleluya Cristo vive</div>
    <div class="item" data-title="Bendito sea el Señor">Bendito sea el Señor</div>
    <div class="item" data-title="Cordero de Dios">Cordero de Dios</div>
    <div class="item" data-title="Digno es el Cordero">Digno es el Cordero</div>
    <div class="item" data-title="El gozo del Señor">El gozo del Señor</div>
    <div class="item" data-title="Grande es el Señor">Grande es el Señor</div>
    <div class="item" data-title="Hay poder">Hay poder</div>
    <div class="item" data-title="Incomparable">Incomparable</div>
    <div class="item" data-title="Jesucristo es el Señor">Jesucristo es el Señor</div>
    <div class="item" data-title="La alegría del Señor">La alegría del Señor</div>
    <div class="item" data-title="Mi salvador vive">Mi salvador vive</div>
    <div class="item" data-title="No hay nadie como tú">No hay nadie como tú</div>
    <div class="item" data-title="Poderoso Dios">Poderoso Dios</div>
    <div class="item" data-title="Rey de reyes">Rey de reyes</div>
    <div class="item" data-title="Santo es el Señor">Santo es el Señor</div>
    <div class="item" data-title="Tú eres santo">Tú eres santo</div>
    <div class="item" data-title="Vine a adorarte">Vine a adorarte</div>
    <div class="item" data-title="Yo te busco">Yo te busco</div>
  </div>
  
  <!-- Debug panel -->
  <div class="debug-panel">
    <h3>Debug Panel</h3>
    <div id="debug-output"></div>
  </div>

  <script>
    // DETECT URL PARAMETERS
    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }
    
    // IMMEDIATE EXECUTION
    document.addEventListener("DOMContentLoaded", function() {
      // Show a status message that the page loaded
      showStatus("Page loaded successfully at " + new Date().toLocaleTimeString());
      
      // Check for query parameter
      const query = getQueryParam('q');
      if (query) {
        document.getElementById('searchInput').value = query;
        performSearch(query);
      }
      
      // Also add a manual search button
      const debugPanel = document.querySelector('.debug-panel');
      const searchButton = document.createElement('button');
      searchButton.textContent = 'Run JavaScript Search';
      searchButton.style.marginTop = '10px';
      searchButton.addEventListener('click', function() {
        const searchInput = document.getElementById('searchInput');
        performSearch(searchInput.value);
      });
      debugPanel.appendChild(searchButton);
      
      // Add some debug info
      logDebug("Browser: " + navigator.userAgent);
      logDebug("Query param: " + (query || "none"));
    });
    
    // BASIC SEARCH FUNCTION
    function performSearch(query) {
      if (!query) {
        showStatus("Empty search - showing all items");
        document.querySelectorAll('.item').forEach(item => {
          item.style.display = 'block';
          item.classList.remove('highlighted');
        });
        return;
      }
      
      showStatus("Searching for: " + query);
      logDebug("Search executed: " + query);
      
      const items = document.querySelectorAll('.item');
      let matchCount = 0;
      
      items.forEach(item => {
        const title = item.getAttribute('data-title').toLowerCase();
        
        if (title.includes(query.toLowerCase())) {
          // Match found - show and highlight
          item.style.display = 'block';
          item.classList.add('highlighted');
          matchCount++;
        } else {
          // No match - hide
          item.style.display = 'none';
          item.classList.remove('highlighted');
        }
      });
      
      // Update status with results
      showStatus("Found " + matchCount + " matches for: " + query);
    }
    
    // HELPER FUNCTIONS
    function showStatus(message) {
      const status = document.getElementById('status');
      status.textContent = message;
      status.style.display = 'block';
    }
    
    function logDebug(message) {
      const debug = document.getElementById('debug-output');
      const timestamp = new Date().toLocaleTimeString();
      const entry = document.createElement('div');
      entry.textContent = `[${timestamp}] ${message}`;
      debug.appendChild(entry);
      
      // Log to console too
      console.log(message);
    }
  </script>
</body>
</html>
